## 1. 과거의 웹 사이트

- 과거의 웹 사이트는 지금보다 문서 하나에 전달되는 파일의 용량이 적음
- 특정 화면에 접속하기 위해 서버에서 전송해준 페이지를 띄워주기만 함
- 그래도 약간의 동적 기능이 필요한 경우, 이벤트에 따른 상태(state=data) 를 사용하기도 함.

## 2. 현재의 웹 사이트

- 현대에 이르러 점차 웹 사이트가 고도화됨에 따라 한 페이지에 해당하는 페이지 용량이 커짐
- 매번 새로운 페이지를 전달함에 따라 비용이 발생하게 됨

## 3. SPA 의 대두

- 현재 웹사이트 개발은 거의 대부분 SPA 기반
- 화면 단위의 렌더링이 일어날 때, 동적으로 화면을 바꿔가며 표현하는 방식
- 화면 마다 일일이 서버로부터의 전송이 필요 없음
- 최초 로드된 자바스크립트를 통해 브라우저 내에서 화면이 바뀌게 됨 (ex. history)

## 4. 상태관리

- 브라우저 딴에서 동적으로 화면을 렌더링함에 따라 화면이 가지고 있는 상태(state=data)를 제어 또는 관리하는 방식이 중요해짐

## 5. (초기) 상태관리

- SPA에 따라 각 화면이 컴포넌트로 분리되면서 컴포넌트간 상태관리를 해주어야 했음
- 초기 컴포넌트간 상태관리는 컴포넌트 → 컴포넌트로 데이터를 전달해주는 방식
- SPA와 추가로 **MVC** 아키택쳐(편하게 디자인하기 위한 패턴)가 많이 사용됨에 따라 
- 허나 점점 앱 규모가 커짐에 따라 하나의 컨트롤러가 여러 모델을 제어하고, 모델과 뷰가 서로를 바라보는 식의 상태관리에 대한 복잡도가 점점 쌓임!
![image](https://user-images.githubusercontent.com/55892515/180911622-b463b4bc-1ff0-4fbb-9a4b-81a33ae62763.png)


## 6. (중기) 상태관리

- 관리해야할 상태를 외부에 두기 시작
- 초기 대표적으로 **Redux (by 페북)** 가 전역 기반의 상태관리 방식으로 나옴
    
    ![redux](https://user-images.githubusercontent.com/55892515/180784484-2b4249b1-c301-4def-a36f-394eed7193bd.png)
    
    *image 출처: [https://css-tricks.com/wp-content/uploads/2016/03/redux-article-3-03.svg?w=640]*
    
- store를 두고 원하는 상태를 dispatcher, action 을 통해 뽑아쓰는 방식 (**flux 아키택쳐**)
    - 비슷한 라이브러리로 **useReducer** 도 있음
    
    - ![image](https://user-images.githubusercontent.com/55892515/180913917-ed1ec5cb-2775-483b-b3c3-713f7c3c7cd7.png)

- 허나 코드작성 초반이 좀 복잡하다는 의견이 많음
    - state 에 맞게 액션값들과 디스패치 함수들 그리고 리듀서 등등 다 만들어두어야 함

## 7. (현재) 상태관리

- 여러 상태관리 라이브러리들이 쏟아져 나오기 시작
    - 좀더 쉽게, 조금더 쉽게
        - **redux-toolkit, recoil (by 페북), context API (라이브러리..?)** …
    - 서버(비동기 or 캐시) 상태를 분리하자
        - HTTP 요청이 1초 내 반복 시 캐시된 값 반환 등등
        - **redux-saga, redux-thunk, SWR, react-query**  …

    - 등등 여러가지 상태관리들..

## 정리

상태관리가 대두되기 시작한 흐름을 살펴보았을 때, 화면 딴에서 사용되는 거의 모든 데이터를 상태로써 관리하는 여러가지 라이브러리들이 있다. 이 때 개발 목적에 맞게 잘 선택해서 사용하는 것이 궁극적인 목표이므로, 어느 것이든 잘 선택해서 목적에 맞게 사용하는 것이 중요하다.

- 화면은 언제 업데이트 되고, 서버에는 언제 데이터를 보내서 동기화 해야 하는가? (prefetch)
- 서버처리를 기다리는 동안 화면의 렌더링은 어떻게 해야 하는가? (ex. loading......)
- 전역 상태, 로컬 상태, UI 상태, 서버 상태(동기화가 필요한)

잘 선택하기 위해서는 전반적인 상태관리의 흐름을 알 필요가 있고, 어떤 방식으로 상태를 관리할 수 있는지 먼저 알고 있어야 한다.
